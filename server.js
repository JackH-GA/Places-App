////////////////////////////////////////
///////// Import Dependancies //////////
////////////////////////////////////////
const express = require('express') // import express framework
const { appendFile } = require('fs')
require('dotenv').config() // import/load EnV variables
const path = require('path') // import path module
const middleware = require('./utils/middleware')
////////////////////////////////////////
///////// Import Routers ///////////////
////////////////////////////////////////

////////////////////////////////////////
///////// Create The App Object  + set up the view engine////////
////////////////////////////////////////

const app = express() // call the express function

// view engine - ejs
app.set('views', path.join(__dirname, 'views'))
app.set('view engine', 'ejs')

////////////////////////////////////////
///////// Middleware ///////////////////
////////////////////////////////////////
middleware(app)
////////////////////////////////////////
///////// Routes ///////////////////////
////////////////////////////////////////
// basic home route
app.get('/', (req, res) => {
    res.send('the app is connected')
})
////////////////////////////////////////
///////// Server Listener //////////////
////////////////////////////////////////
const PORT = process.env.PORT
app.listen(PORT, () => {
    console.log('your server is running, better go catch it')
})
// End